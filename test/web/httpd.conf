################################################################################
#
# test/swifche/httpd.conf
#
# Â© 2025 YOCKOW.
#     Licensed under MIT License.
#     See "LICENSE.txt" for more information.
#
################################################################################

Define ServerRootDirPath "${APACHE_HTTP_SERVER_INSTALL_PREFIX}"
Define ModulesDirPath "${ServerRootDirPath}/modules"
Define rotatelogs "${ServerRootDirPath}/bin/rotatelogs"
Define WWWHomeDirPath "/home/${WWW_USER_NAME}"
Define WebRootDirPath "${WWWHomeDirPath}/web"
Define DocumentRootDirPath "${WebRootDirPath}/DocumentRoot"
Define LogsDirPath "${WebRootDirPath}/Logs"
Define GeneralErrorLogFilePath "${LogsDirPath}/error.%Y%m%d.txt"
Define CommonLogFilePath "${LogsDirPath}/common.%Y%m%d.txt"
Define CombinedLogFilePath "${LogsDirPath}/combined.%Y%m%d.txt"
Define CustomLogFilePath "${LogsDirPath}/custom.%Y%m%d.txt"

ServerRoot "${ServerRootDirPath}"
Listen 80

LoadModule mpm_event_module "${ModulesDirPath}/mod_mpm_event.so"
LoadModule authn_file_module "${ModulesDirPath}/mod_authn_file.so"
LoadModule authn_core_module "${ModulesDirPath}/mod_authn_core.so"
LoadModule authz_host_module "${ModulesDirPath}/mod_authz_host.so"
LoadModule authz_groupfile_module "${ModulesDirPath}/mod_authz_groupfile.so"
LoadModule authz_user_module "${ModulesDirPath}/mod_authz_user.so"
LoadModule authz_core_module "${ModulesDirPath}/mod_authz_core.so"
LoadModule access_compat_module "${ModulesDirPath}/mod_access_compat.so"
LoadModule auth_basic_module "${ModulesDirPath}/mod_auth_basic.so"
LoadModule reqtimeout_module "${ModulesDirPath}/mod_reqtimeout.so"
LoadModule include_module "${ModulesDirPath}/mod_include.so"
LoadModule filter_module "${ModulesDirPath}/mod_filter.so"
LoadModule mime_module "${ModulesDirPath}/mod_mime.so"
LoadModule log_config_module "${ModulesDirPath}/mod_log_config.so"
LoadModule env_module "${ModulesDirPath}/mod_env.so"
LoadModule headers_module "${ModulesDirPath}/mod_headers.so"
LoadModule setenvif_module "${ModulesDirPath}/mod_setenvif.so"
LoadModule version_module "${ModulesDirPath}/mod_version.so"
LoadModule ssl_module "${ModulesDirPath}/mod_ssl.so"
LoadModule http2_module "${ModulesDirPath}/mod_http2.so"
LoadModule unixd_module "${ModulesDirPath}/mod_unixd.so"
LoadModule status_module "${ModulesDirPath}/mod_status.so"
LoadModule autoindex_module "${ModulesDirPath}/mod_autoindex.so"
LoadModule cgid_module "${ModulesDirPath}/mod_cgid.so"
LoadModule dir_module "${ModulesDirPath}/mod_dir.so"
LoadModule alias_module "${ModulesDirPath}/mod_alias.so"

User ${WWW_USER_NAME}
Group ${WWW_GROUP_NAME}
ServerAdmin swifche-test-server@YOCKOW.jp

<Directory />
  AllowOverride none
  Require all denied
</Directory>

H2ModernTLSOnly on
H2StreamMaxMemSize 262144
H2MaxSessionStreams 25
H2Push on
H2EarlyHints off
Protocols h2 h2c http/1.1

DocumentRoot "${DocumentRootDirPath}"
<Directory "${DocumentRootDirPath}">
  Options Indexes
  AllowOverride All
  Require all granted
</Directory>

DirectoryIndex index.html

<Files ".ht*">
  Require all denied
</Files>

ErrorLog "|${rotatelogs} ${GeneralErrorLogFilePath} 86400 540"
LogLevel warn

LogFormat "%h %l %u %t \"%r\" %>s %b" common
LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" combined
LogFormat "%{%Y/%m/%d(%a) %H:%M:%S %z}t; \"%{Referer}i\" => <%H:%m>%U%q =(%s|%>s)=> %f; %a(%h); \"%{User-agent}i\"" custom
CustomLog "|${rotatelogs} ${CommonLogFilePath} 86400 540" common
CustomLog "|${rotatelogs} ${CombinedLogFilePath} 86400 540" combined
CustomLog "|${rotatelogs} ${CustomLogFilePath} 86400 540" custom

TypesConfig conf/mime.types
AddCharset utf-8 .html
FileETag MTime Size
